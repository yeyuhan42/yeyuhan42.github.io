<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>进度条</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		html,body{
			background: #000;
		}
		#c1{
			background: #fff;
			margin: 100px;
		}
	</style>
	<script>
		function d2a(n){
			return n*Math.PI/180;
		}
		window.onload=function(){
			var oC=document.getElementById('c1');
			oC.width="800";
			oC.height="500";
			var cx=400;
			var cy=200;
			var r=150;

			//圆
			var gd=oC.getContext('2d');

			gd.lineWidth="20";

			var str="0%";
			var h=60;
			gd.fillStyle="#f00";
			gd.font=h+"px songti";

			var d=0;
			var timer=setInterval(function(){
				gd.clearRect(0,0,oC.width,oC.height);
				gd.beginPath();
				gd.strokeStyle="rgb("+parseInt(d/360*255)+",0,0)";
				gd.arc(cx,cy,r,d2a(0),d2a(d++),false);
				gd.stroke();

				//文字
				str=Math.floor(d/360*100)+'%';
				var w=gd.measureText(str).width;
				gd.fillText(str,cx-w/2,cy+h/2);

				if(d>360){
					clearInterval(timer);
				}
			},30);


		};
	</script>
</head>
<body>
	<canvas id="c1"></canvas>
</body>
</html>